{% extends "layout1.html" %}

{% block title %}Tiers{% endblock %}


{% block content %}

<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.1/jquery.validate.min.js"></script>

 <!-- Option 1: Bootstrap Bundle with Popper -->
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>


 <style>
	body {
		content: "";
	  	background-image: url('/static/final1.png');
		background-size: cover;
		position: absolute;
		top: 0px;
		right: 0px;
		bottom: 0px;
		left: 0px;
		opacity: 1;
	}

	div {
		opacity: 1;
		font-weight: bold;
		color:black;
	}

	button {
		opacity: 1;
		font-weight: bold;
		color:black;
	}
	</style>


	<h1>Tier</h1>

	<br>

	<form method="POST" class="validateForm">
		<div> 
			<h2>Add tier</h2>
			{%- if dupTier == false %}
				<div class="alert alert-danger" role="alert">
					Tier already exists
				</div>
			{% endif -%}
				<input id="tier_name" type="text" name="tierName" placeholder="Tier name" pattern="^[a-zA-Z][a-zA-Z0-9\s]*" required>		
				<input id="tier_price" type="number" name="tierPrice" min="0" placeholder="Tier price" required>		
				<input type="submit" name="submit_btn" onclick="return confirm('Are you sure?')" value="Add Tier" >
			<span></span>
		</div>
	</form>

	<br>

	<form method="POST" class="validateForm">
		<div> 
			<h2>Delete tier</h2>
			<select name = "tierid">
				<!-- <option disabled selected value="">Tier</option> -->
				{% for tier in tiers %}
				<option value={{tier[0]}} name = "tier_id">
					{{tier[1]}}
				</option>
				{% endfor %}
			</select>
			<input type="submit" name="submit_btn" onclick="return confirm('\t\t\t\tCaution!\n\n\t\tYou are about to delete a tier\n All Users, books belonging to this tier will be DELETED!!')" value="Delete Tier">
			<span></span>
		</div>
		
	</form>

	<br>

	<form method="POST" class="validateForm">
		<div> 
			<h2>Update tier price</h2>
			<select name = "tierid">
				<!-- <option disabled selected value="">Tier</option> -->
				{% for tier in tiers %}
				<option value={{tier[0]}} name = "tierid">
					{{tier[1]}}
				</option>
				{% endfor %}
			</select>
			<input id="tier_price" type="number" name="tierPrice" min="0" placeholder="Tier price" required>
			<input type="submit" name="submit_btn" value="Update Tier" onclick="return confirm('Are you sure?')">
			<span></span>
		</div>
		
	</form>

	<br>
	<form class="validateForm" method="POST">
		<div> 
			<h2>Search</h2>
			<div>
				<label for="searchTier">Tier</label>
				<input id="searchTier" type="text" name="searchTier" placeholder="Tier" required>
				<!-- [a-zA-Z][a-zA-Z0-9\s]* -->
			</div>
			<br>
			<div>
				<input id="btnSubmit" type="submit" name="submit_btn"  value="Search Tier"> 			
			</div>
		</div>
	</form>
	<br>
	{% if searched == true %}
		<h2>Tier searched</h2>
		<table class="table">
		    <thead>
		    	<tr>
		        	<th>Tier ID</th>
		        	<th>Tier Name</th>
		       		<th>Tier Price</th>
		    	</tr>
		    </thead>    
		    <tbody>
		    {% for s in searchResults %}    
	            <tr>
	                <td>{{s[0]}}</td>
	                <td>{{s[1]}}</td>
	                <td>{{s[2]}}</td>
	            </tr>
		    {% endfor %}
		    </tbody>
		</table>

	{% endif %}

	<br>

	<h2>Tier Data</h2>
	<table class="table">
	    <thead>
	    	<tr>
	        	<th>Tier ID</th>
	        	<th>Tier Name</th>
	       		<th>Tier Price</th>
	    	</tr>
	    </thead>    
	    <tbody>
	    {% for tier in tiers %}    
            <tr>
                <td>{{tier[0]}}</td>
                <td>{{tier[1]}}</td>
                <td>{{tier[2]}}</td>
            </tr>
	    {% endfor %}
	    </tbody>
	</table>

	<script src="//code.jquery.com/jquery-1.12.0.min.js"></script>
	
	<script>
		$(function() {
		    $('form.validateForm').each(function(key, form) {
		        $(form).validate(); 
		    });
		});
	</script>


{% endblock %}