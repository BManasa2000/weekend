{% extends 'layout.html' %}

{% block title %}Item{% endblock %}

{% block header %}Item details{% endblock %}

{% block content %}

    <link rel="stylesheet" type="text/css" href="/static/styles/bought.css">
    <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">


    <div class="container">
      <div class="navbar">
        <h1>ITEM DETAILS</h1>
        <nav>
            <ul>
                <!-- <li><a href="/">Home</a></li> -->
                <li><a href="/shop"><img src="/static/shop.png" width="30px" height="30px"></a></li>
                <li><a href="/shoppingcart"><img src="/static/cart.png" width="30px" height="30px"></a></li>
                <li><a href="/boughtcart"><img src="/static/bought.png" width="30px" height="30px"></a></li>
            </ul>
        </nav>
      </div>
    </div>

    
    {% if msg != '' %}
    <div class="alert alert-warning" role="alert" style="">
        {{msg}}
    </div>
    {% endif %}

    <div class="product-info">
    <form name="itemForm" method ="POST" action="/add/{{itemid}}" onsubmit="return(validate())">
        <img src="/static/images/{{image}}" width="150px" height="150px">
        <h1>{{name}}</h1>
        <p>{{message}}</p>
        <form method ="POST" action="/add">
        <label for="total_quantity">Qnt: </label>
        <input type="number" id="total_quantity" name="total_quantity" value="0">
        <p>â‚¹ {{price}}</p>
        <p>Brand: {{Brand}}
        <p>{{Desc}}</p>
        <p>Stock: {{Stock}}</p>
        <!-- <a href="/shop"><button type="button" name="goback">Continue Shopping</button></a> -->
        <input type="submit" name="submit_btn" value="Add To Cart">
    </form>
    </div>

<script type="text/javascript">
    function validate(){
        // alert("here")
        var qty = document.forms["itemForm"]["total_quantity"].value;
        // var qty = document.getElementById("total_quantity");
        qty = parseInt(qty)
        if (qty == 0)
        {
            alert("Oops! Quantity cannot be 0")
            return false;
        } 
        // alert(qty < 0)
        if (qty < 0)
        {
            alert("Oops! Quantity cannot be negative")
            return false;
        }       
        var stock = "{{Stock}}";
        // alert(stock)
        stock = parseInt(stock);
        if (qty > stock)
        {
            alert("Oops! Not enough stock")
            return false;
        }
        return true;
    }
</script>

{% endblock %}
